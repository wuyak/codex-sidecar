# codex_sdk

## 职责
提供一个**可选的控制模式**：通过 Codex SDK 在本机静默创建/恢复对话 thread，并允许浏览器 UI 把输入写入该对话，从而驱动 Codex 执行与输出（尽量贴近 CLI 交互体验）。

## 输入/输出
- 输入：UI 侧的用户文本输入（可扩展：图片/本地文件上下文等）
- 输出：UI 侧展示的执行结果（建议支持 SSE 流式输出）

## 边界与约束
- 默认仍以 `rollout_sidecar` 的“旁路只读”模式运行；`codex_sdk` 仅在用户显式启用时生效。
- 安全边界必须严格：控制模式等价于“本机执行入口”，必须默认仅允许本机访问，并具备 CSRF/token 等防护。

## 关键设计
- 推荐以 `src/codex-sdk/` 作为 Node bridge 子服务承载 SDK 逻辑（Codex SDK 文档以 Node 包形式提供且要求 Node.js ≥ 18）。
- Python sidecar 继续负责 UI 资源与旁路监听，可按需提供 `/api/sdk/*` 聚合/代理，避免 UI 跨域与多端口心智负担。

## 状态
- **状态:** 📝规划中
- **最后更新:** 2026-01-15
