# 高级选项（Advanced）调研记录

## 背景

近期用户反馈「高级选项」可能已经没有意义：体感上系统似乎“全进程跟随”，不再依赖轮询/定时扫描，因此相关参数调整应该不会影响实际行为。

## 现状结论（基于代码走读）

1. **仍存在轮询主循环**  
   `codex_sidecar/watcher.py` 的 `run()` 仍在循环中定期执行：
   - follow 文件同步/轮询（例如 `_poll_follow_files()`）
   - TUI/终端侧状态轮询（例如 `self._tui.poll(...)`）
   - 通过 `stop_event.wait(self._poll_interval_s)` 控制循环节奏

2. **仍存在周期性扫描/同步 follow 目标**  
   同一循环内按 `file_scan_interval_s` 的节奏触发 `_sync_follow_targets(...)`，用于刷新“需要 follow 的文件/目标集合”（从而适配进程/路径变化等）。

> 结论：**“无轮询”假设不成立**。因此，面向轮询与扫描的高级选项仍然具备可用性与可解释的影响路径。

## 高级选项可能对应的价值点

- **轮询间隔**：影响 UI/TUI 状态刷新与 follow 文件更新的“响应速度 vs CPU/IO”权衡。
- **扫描间隔**：影响 follow 目标集合刷新频率（例如进程变化、文件列表变化时多久生效）。
- **进程相关策略**（如“仅在进程存在时启用/跟随进程”）：影响 follow 的启停条件与目标选择范围。

## 建议（暂不落地修改）

由于用户希望“暂时不改 UI”，本次只记录后续可能方向：

1. **保留高级选项，但说明其确实有效**：在 UI 文案或帮助提示中明确“仍存在轮询/扫描”，避免用户误判“设置无效”。
2. **收敛选项数量**：若高级选项较多，可考虑只保留 1~2 个最常用参数（轮询间隔/扫描间隔），其余隐藏到“更多”或仅开发版显示。
3. **默认值策略**：以稳定优先（较保守的间隔）作为默认，提供“性能优先/实时优先”快捷预设。

