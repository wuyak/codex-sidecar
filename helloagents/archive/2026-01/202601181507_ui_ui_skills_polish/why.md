# 变更提案: UI 审查与轻量优化（ui-ux-pro-max + ui-skills）

## 需求背景
当前 Web UI 是“纯静态（无构建）”的 HTML/CSS/Vanilla JS，迭代速度快，但随着功能堆叠出现了：
- 视觉与信息层级不稳定：调试信息/路径过长、状态提示与主要阅读区争夺注意力
- 可用性与可访问性问题：触控目标偏小、破坏性操作使用浏览器 `confirm/alert`、错误提示不贴近输入位置
- 性能风险点：大面积 `backdrop-filter` + 动画在低端设备/移动端容易掉帧

本变更目标是在**不引入前端框架、不改业务逻辑**的前提下，让 UI 更“商业化/克制/稳定”，并尽可能对齐 `ui-skills` 约束。

## 变更内容
1. 统一 UI 信息架构：默认只展示用户关心的状态；调试/诊断信息收纳
2. 统一视觉规则：移除非必要装饰（letter-spacing/渐变/大面积 blur），强调清晰层级与可读性
3. 强化交互与无障碍：触控目标、`prefers-reduced-motion`、安全区、破坏性操作确认弹窗
4. 强化表单错误反馈：把“缺字段/不合法”提示放回输入附近，并引导定位

## 影响范围
- **模块:**
  - `ui/`（样式、交互、空态与弹窗）
  - `helloagents/`（同步 UI 规范与注意事项）
  - `helloagents/CHANGELOG.md`（变更记录）
- **文件:**
  - `ui/index.html`
  - `ui/styles.css`
  - `ui/app/control/*`
  - `ui/app/render/*`
  - `helloagents/modules/rollout_sidecar.md`
  - `helloagents/CHANGELOG.md`
- **API:** 无新增（仅前端交互与展示层调整）
- **数据:** 无

## 核心场景

### 需求: 更“克制”的状态信息
**模块:** UI 顶栏/状态栏
默认状态只告诉用户“正在做什么/跟随哪些会话/开关状态”，不展示 pid/路径/接口等调试信息。

#### 场景: 用户只想确认正在监听与跟随对象
- 预期结果：
  - 顶栏一行即可读：监听/会话数/翻译/精简/固定/异常
  - 鼠标悬停可看到“当前跟随会话列表”（短时间戳 + shortId），不占用主阅读区

### 需求: 破坏性操作更安全且不打断阅读
**模块:** 右侧工具栏/设置抽屉
对“退出/重启/删除 Profile”等破坏性操作提供统一的确认弹窗（AlertDialog 语义），并确保键盘可用。

#### 场景: 用户误触 ⏻ 或删除 Profile
- 预期结果：
  - 出现统一的确认弹窗，说明影响并提供取消
  - 默认聚焦在“取消”，避免误操作连点

### 需求: 表单错误就地提示
**模块:** 设置/翻译设置
避免 `alert()` 抢焦点；错误提示出现在输入框附近并高亮字段。

#### 场景: 用户漏填 Base URL / API Key
- 预期结果：
  - 字段旁显示简短错误说明并聚焦到该字段
  - 不遮挡主阅读区；不破坏当前会话阅读状态

## 风险评估
- **风险:** CSS 规则调整可能影响层级/布局（尤其是 fixed 元素与抽屉/书签栏叠放）
- **缓解:** 使用固定 z-index 量表与 `env(safe-area-inset-*)`；改动后做多分辨率自检（桌面/移动端/深色皮肤）
