		      *, *::before, *::after { box-sizing: border-box; }
			      body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji"; margin: 0; background: var(--c-bg, #fff); color: var(--c-text, #0f172a); }
			      :root {
			        --c-bg: #f8fafc;
			        --c-surface: #ffffff;
			        --c-border: rgba(148, 163, 184, .38);
			        --c-border-strong: rgba(148, 163, 184, .55);
			        --c-text: #0f172a;
			        --c-muted: #475569;
			        --c-accent: #0ea5e9;
			        --shadow-sm: 0 6px 20px rgba(0,0,0,.06);
			        --shadow-md: 0 16px 44px rgba(0,0,0,.10);

			        --z-rightbar: 1500;
			        --z-float-nav: 1600;
			        --z-bookmarks: 1700;
		        --z-drawer-overlay: 1900;
		        --z-drawer: 1910;

		        --rightbar-right: 16px;
		        --rightbar-w: 38px;
		        --rightbar-gap: 8px;

		        --bm-host-w: 46px;
		        --bm-btn-w: 34px;
		        --bm-btn-h: 32px;
		        --bm-expand-w: 180px;
		        --bm-gap-y: 6px;

		        --bm-bg: rgba(248, 250, 252, .92);
		        --bm-bg-hover: rgba(255,255,255,.98);
		        --bm-shadow: 0 10px 28px rgba(0,0,0,.14);
		      }

		      body[data-bm-skin="flat"] {
		        --bm-bg: rgba(255,255,255,.96);
		        --bm-bg-hover: rgba(255,255,255,1);
		        --bm-shadow: 0 12px 30px rgba(0,0,0,.10);
		      }
		      /* 会话书签（替代侧栏 tabs） */
			      #bookmarks { position: fixed; top: 50%; right: calc(var(--rightbar-right) + var(--rightbar-w) + var(--rightbar-gap)); left: auto; bottom: auto; transform: translateY(-50%); width: var(--bm-host-w); max-height: calc(100vh - 32px); overflow-y: auto; overflow-x: visible; display:flex; flex-direction:column; align-items:flex-end; gap: var(--bm-gap-y); z-index: var(--z-bookmarks); padding: 2px 0; }
			      .bookmark { width: var(--bm-btn-w); height: var(--bm-btn-h); border: 1px solid var(--c-border-strong); background: var(--bm-bg); border-radius: 999px; cursor:pointer; display:flex; align-items:center; gap:8px; padding: 0 10px 0 10px; position: relative; overflow: hidden; transition: width .14s ease, box-shadow .14s ease, border-color .14s ease, background .14s ease; }
		      .bookmark::before { content:""; width: 10px; height: 10px; border-radius: 999px; background: var(--bm-accent, #0ea5e9); flex: 0 0 auto; }
		      .bookmark .bm-label { font-size: 12px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; opacity: 0; transform: translateX(-4px); transition: opacity .12s ease, transform .12s ease; color:#0f172a; min-width: 0; }
		      .bookmark:hover, .bookmark.active, .bookmark.editing { width: var(--bm-expand-w); box-shadow: var(--bm-shadow); border-color: var(--bm-border, rgba(148, 163, 184, .55)); background: var(--bm-bg-hover); }
	      .bookmark:hover .bm-label, .bookmark.active .bm-label, .bookmark.editing .bm-label { opacity: 1; transform: translateX(0); }
	      .bookmark.active { border-color: var(--bm-accent, #0ea5e9); background: rgba(2, 132, 199, .06); }
	      .bookmark.tab-hidden { opacity: .55; filter: saturate(.8); }
	      .bookmark.has-unread::after {
	        content: attr(data-unread);
	        position: absolute;
	        top: -6px;
	        right: -6px;
	        min-width: 18px;
	        height: 18px;
	        padding: 0 5px;
	        border-radius: 999px;
	        background: rgba(239, 68, 68, .96);
	        color: #fff;
	        font-size: 11px;
	        line-height: 18px;
	        text-align: center;
	        border: 1px solid rgba(255,255,255,.92);
	        box-shadow: 0 10px 24px rgba(0,0,0,.14);
	      }
	      .bookmark .bm-edit { display:none; width: 100%; padding: 5px 8px; border: 1px solid #93c5fd; border-radius: 10px; outline: none; font-size: 12px; background:#fff; }
	      .bookmark.editing .bm-label { display:none; }
	      .bookmark.editing .bm-edit { display:block; }

			      #main { margin: 16px calc(var(--rightbar-right) + var(--rightbar-w) + 12px) 16px 16px; padding-bottom: 16px; }
		      .row { border: 1px solid var(--c-border); border-left: 4px solid rgba(148, 163, 184, .55); border-radius: 10px; padding: 12px; margin: 10px 0; background: var(--c-surface); box-shadow: var(--shadow-sm); }
	      .row.kind-user_message { border-left-color:#38bdf8; }
	      .row.kind-assistant_message { border-left-color:#4ade80; }
	      .row.kind-tool_call, .row.kind-tool_output { border-left-color:#fbbf24; }
	      .row.kind-tool_gate { border-left-color:#f87171; }
	      .row.kind-reasoning_summary, .row.kind-agent_reasoning { border-left-color:#c4b5fd; }
		      .meta { color: var(--c-muted); font-size: 12px; }
	      .meta-link { color: #0ea5e9; text-decoration: none; }
	      .meta-link:hover { text-decoration: underline; }
	      .meta-line { display:flex; align-items:center; gap:8px; }
	      .meta-left { display:flex; align-items:center; gap:8px; flex-wrap:wrap; min-width: 0; }
	      .meta-right { margin-left:auto; display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
	      .meta-line .timestamp { font-variant-numeric: tabular-nums; }
	      pre { white-space: pre-wrap; word-break: break-word; margin: 8px 0 0; }
	      .badge { display:inline-block; padding:2px 8px; border-radius:999px; background:#f1f5f9; font-size:12px; margin-right:8px; }
	      .badge.kind-user_message, .badge.kind-user { background:#e0f2fe; }
	      .badge.kind-assistant_message, .badge.kind-assistant { background:#dcfce7; }
      .badge.kind-tool_call, .badge.kind-tool_output { background:#fef9c3; }
      .tabs { display:flex; flex-direction:column; gap:6px; margin: 10px 0 0; }
      .tab { border: 1px solid #ddd; background:#fff; padding:6px 10px; border-radius: 10px; cursor:pointer; font-size: 12px; text-align:left; width: 100%; display:flex; align-items:center; gap:8px; position: relative; }
      .tab.active { background:#111827; color:#fff; border-color:#111827; }
      .tab small { opacity: .75; }
	      .tab .tab-label { flex: 1 1 auto; min-width: 0; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
		      .tab > small { margin-left: auto; }
	      .tab.has-unread::after {
	        content: attr(data-unread);
	        position: absolute;
	        top: -6px;
	        right: -6px;
	        min-width: 18px;
	        height: 18px;
	        padding: 0 5px;
	        border-radius: 999px;
	        background: rgba(239, 68, 68, .96);
	        color: #fff;
	        font-size: 11px;
	        line-height: 18px;
	        text-align: center;
	        border: 1px solid rgba(255,255,255,.92);
	        box-shadow: 0 10px 24px rgba(0,0,0,.14);
	      }
	      .tab-dot { width: 10px; height: 10px; border-radius: 999px; display:inline-block; flex: 0 0 auto; }
      .top-title { font-size: 18px; font-weight: 800; letter-spacing: .2px; }
	      .rightbar { position: fixed; top: 16px; right: var(--rightbar-right); display:flex; flex-direction:column; gap: var(--rightbar-gap); z-index: var(--z-rightbar); }
	      .icon-btn { width: var(--rightbar-w); height: var(--rightbar-w); padding: 0; border-radius: 999px; display:flex; align-items:center; justify-content:center; border: 1px solid var(--c-border); background: var(--c-surface); color: var(--c-text); cursor:pointer; box-shadow: var(--shadow-sm); font-size: 16px; line-height: 1; }
	      .icon-btn:hover { background:#f8fafc; }
	      .icon-btn.active { background:#111827; color:#fff; border-color:#111827; }
      .icon-btn:disabled { opacity: .45; cursor: not-allowed; box-shadow: none; }
	      .icon-btn.danger { background: var(--c-surface); border-color: rgba(248,113,113,.45); color: #b91c1c; }
	      .icon-btn.danger:hover { background: rgba(254,226,226,.65); }
      .grid { display:grid; grid-template-columns: 140px 1fr; gap: 6px 10px; align-items:center; margin-top: 10px; }
      .grid.grid-compact { grid-template-columns: 110px 1fr; gap: 6px 8px; margin-top: 8px; }
      .grid input, .grid select { width: 100%; padding: 6px 8px; border: 1px solid #e2e8f0; border-radius: 10px; background:#fff; }
      .grid.grid-compact input, .grid.grid-compact select { padding: 5px 8px; border-radius: 10px; }
      .grid input:focus, .grid select:focus { outline: none; border-color: #93c5fd; box-shadow: 0 0 0 3px rgba(59,130,246,.12); }
      .btns { display:flex; gap: 8px; flex-wrap:wrap; margin-top: 10px; }
	      button { border: 1px solid var(--c-border); background: var(--c-surface); color: var(--c-text); padding: 7px 10px; border-radius: 10px; cursor:pointer; box-shadow: 0 1px 0 rgba(15,23,42,.04); }
      button.primary { background:#111827; color:#fff; border-color:#111827; }
	      button.danger { background:#fee2e2; border-color:#fecaca; }
		      .muted { opacity: .8; }
		      .float-nav { position: fixed; right: var(--rightbar-right); left: auto; bottom: 16px; display:flex; flex-direction:column; gap: var(--rightbar-gap); z-index: var(--z-float-nav); }
		      .float-nav button { width: var(--rightbar-w); height: var(--rightbar-w); padding: 0; border-radius: 999px; box-shadow: var(--shadow-sm); border: 1px solid var(--c-border); background: var(--c-surface); color: var(--c-text); display:flex; align-items:center; justify-content:center; cursor:pointer; }
		      .float-nav button:hover { background:#f8fafc; }
	      #scrollBottomBtn.has-unread { position: relative; }
	      #scrollBottomBtn.has-unread::after {
	        content: attr(data-unread);
	        position: absolute;
	        top: -6px;
	        right: -6px;
	        min-width: 18px;
	        height: 18px;
	        padding: 0 5px;
	        border-radius: 999px;
	        background: rgba(239, 68, 68, .96);
	        color: #fff;
	        font-size: 11px;
	        line-height: 18px;
	        text-align: center;
	        border: 1px solid rgba(255,255,255,.92);
	        box-shadow: 0 10px 24px rgba(0,0,0,.14);
	      }
			      .drawer-overlay { position: fixed; inset: 0; background: rgba(15,23,42,.18); z-index: var(--z-drawer-overlay); }
				      .drawer { position: fixed; top: 16px; right: var(--rightbar-right); bottom: 16px; width: 440px; max-width: calc(100vw - 32px); background:#fff; border: 1px solid #ddd; border-radius: 12px; padding: 12px; overflow: auto; z-index: var(--z-drawer); box-shadow: 0 12px 40px rgba(0,0,0,.12); }
		      .drawer-head { display:flex; align-items:center; justify-content:space-between; gap:8px; }
		      .drawer-head .title { font-weight: 700; }
			      .drawer-close { border:1px solid #e2e8f0; background:#fff; border-radius: 10px; width: 34px; height: 34px; padding: 0; font-size: 18px; line-height: 1; cursor:pointer; }
			      .drawer-sec { margin-top: 10px; border: 1px solid #e2e8f0; border-radius: 12px; background:#fff; padding: 8px 10px; }
			      .drawer-sec > summary { cursor:pointer; font-weight: 700; color:#0f172a; list-style: none; }
			      .drawer-sec > summary::-webkit-details-marker { display: none; }
			      .drawer-sec[open] > summary { margin-bottom: 6px; }
		      .tool-card { background:#f8fafc; border: 1px solid #e2e8f0; border-radius: 10px; padding: 10px; margin-top: 8px; }
		      .tool-head { display:flex; align-items:center; justify-content:space-between; gap:8px; }
		      .tool-actions { display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
	      .tool-toggle { border: 1px solid #e2e8f0; background:#fff; padding: 2px 8px; border-radius: 999px; cursor:pointer; font-size: 12px; color:#334155; }
		      .tool-toggle:hover { background:#f1f5f9; }
	      .tool-details { margin-top: 8px; }
	      .hidden { display: none; }
	      .pill { display:inline-block; padding:2px 8px; border-radius:999px; border:1px solid #e2e8f0; background:#fff; font-size:12px; }
	      button.pill { font-family: inherit; line-height: 1.2; }
	      .pill-btn { appearance: none; -webkit-appearance: none; cursor: pointer; }
	      .pill-btn:hover { background:#f1f5f9; }
	      .pill-btn:active { transform: translateY(1px); }
	      .pill-btn:disabled { opacity: .55; cursor: default; transform: none; }
	      .tool-meta { display:flex; flex-wrap:wrap; gap:10px; margin-top: 6px; color:#555; font-size: 12px; }
	      .pre-wrap { position: relative; }
	      .copy-btn { position:absolute; top: -10px; right: 6px; width: 22px; height: 22px; padding: 0; border-radius: 999px; font-size: 13px; line-height: 1; display:flex; align-items:center; justify-content:center; border: 1px solid rgba(148,163,184,.45); background: rgba(15,23,42,.55); color:#e2e8f0; cursor:pointer; opacity: 0; transition: opacity .15s; backdrop-filter: blur(2px); }
	      .copy-btn.light { background: rgba(255,255,255,.85); color:#0f172a; border-color:#e2e8f0; }
	      .pre-wrap:hover .copy-btn { opacity: 1; }
	      .copy-btn:active { transform: translateY(1px); }
	      @keyframes copyToastFade {
	        0% { opacity: 0; transform: translateY(-6px) scale(.98); }
	        12% { opacity: 1; transform: translateY(0) scale(1); }
	        78% { opacity: 1; }
	        100% { opacity: 0; transform: translateY(-8px) scale(.98); }
	      }
	      @keyframes cornerToastIn {
	        0% { opacity: 0; transform: translateY(8px) scale(.98); }
	        12% { opacity: 1; transform: translateY(0) scale(1); }
	        100% { opacity: 1; }
	      }
	      .copy-toast { position:absolute; top: -10px; right: 34px; padding: 4px 10px; border-radius: 999px; font-size: 12px; line-height: 1; background: rgba(15,23,42,.72); color:#e2e8f0; border: 1px solid rgba(148,163,184,.35); box-shadow: 0 10px 24px rgba(0,0,0,.14); pointer-events:none; animation: copyToastFade 1.2s ease forwards; }
	      .copy-toast.light { background: rgba(255,255,255,.92); color:#0f172a; border-color:#e2e8f0; }
	      .copy-toast.fixed { position: fixed; top: 0; left: 0; right: auto; z-index: 2000; }
	      .corner-notify { position: fixed; right: 64px; bottom: 16px; z-index: 1950; display:flex; flex-direction:column; gap: 8px; pointer-events:none; }
	      .corner-toast { pointer-events:none; min-width: 220px; max-width: min(460px, calc(100vw - 28px - 64px)); padding: 10px 12px; border-radius: 12px; border: 1px solid rgba(148,163,184,.35); background: rgba(15,23,42,.86); color:#e2e8f0; box-shadow: 0 16px 44px rgba(0,0,0,.22); backdrop-filter: blur(4px); animation: cornerToastIn .16s ease-out forwards; }
	      .corner-toast.info { border-color: rgba(148,163,184,.35); }
	      .corner-toast.warn { border-color: rgba(248,113,113,.55); background: rgba(127,29,29,.86); }
	      .corner-toast.success { border-color: rgba(34,197,94,.5); background: rgba(20,83,45,.86); }
	      .corner-title { font-size: 12px; font-weight: 800; letter-spacing: .2px; color:#f8fafc; }
	      .corner-detail { margin-top: 4px; font-size: 12px; color:#e2e8f0; opacity: .95; white-space: pre-wrap; word-break: break-word; }
	      pre.code { background:#0b1020; color:#e5e7eb; padding: 10px; border-radius: 10px; overflow:auto; white-space: pre; word-break: normal; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 12px; line-height: 1.35; }
      pre.code { cursor: pointer; }
      pre.code.copied { outline: 2px solid rgba(34,197,94,.35); box-shadow: 0 0 0 4px rgba(34,197,94,.14); }
      pre.code .diff-line { display:block; padding: 0 6px; border-radius: 6px; }
      pre.code .diff-add { background: rgba(34, 197, 94, .16); }
      pre.code .diff-del { background: rgba(239, 68, 68, .16); }
      pre.code .diff-ellipsis { color:#cbd5e1; background: rgba(59, 130, 246, .12); }
	      .change-head { display:flex; flex-wrap:wrap; align-items:center; gap:8px; }
	      .md { font-size: 13px; line-height: 1.6; }
	      .md h1, .md h2, .md h3 { margin: 10px 0 6px; line-height: 1.25; }
		      .md p { margin: 6px 0; }
		      .md ul { margin: 6px 0 6px 18px; padding: 0; }
		      .md ol { margin: 6px 0 6px 20px; padding: 0; }
		      .md li { margin: 2px 0; }
		      .md code { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 12px; background:#f1f5f9; padding: 1px 6px; border-radius: 6px; }
		      .md pre code { background: transparent; padding: 0; }
		      .md .md-sep { margin: 10px 0; color:#cbd5e1; letter-spacing: 2px; }
        .md-table { margin: 8px 0 0; overflow-x: auto; border: 1px solid #e2e8f0; border-radius: 10px; background: #fff; }
        .md-table table { border-collapse: collapse; width: 100%; min-width: 420px; }
        .md-table th, .md-table td { border-top: 1px solid #e2e8f0; border-left: 1px solid #e2e8f0; padding: 6px 8px; vertical-align: top; }
        .md-table th:first-child, .md-table td:first-child { border-left: none; }
        .md-table thead th { background: #f8fafc; font-weight: 700; color: #0f172a; }
        .md-table tbody tr:nth-child(even) td { background: #fbfdff; }
	      .think-split { margin-top: 10px; padding-top: 10px; border-top: 1px solid #e2e8f0; }
	      .row.think-mode-en .think-zh { display: none; }
	      .row.think-mode-en .think-wait { display: none; }
	      .row.think-mode-zh .think-en { display: none; }
	      body.quick-view .row:not(#topbar):not(.row-empty):not(.kind-user_message):not(.kind-assistant_message):not(.kind-reasoning_summary):not(.kind-agent_reasoning):not(.tool-update_plan) { display: none; }
	      .profile-row { display:flex; gap: 6px; align-items:center; }
	      .mini-btn { width: 30px; height: 30px; padding: 0; border-radius: 10px; border: 1px solid #e2e8f0; background:#fff; cursor:pointer; display:flex; align-items:center; justify-content:center; font-size: 14px; line-height: 1; }
	      .mini-btn:hover { background:#f1f5f9; }
	      .mini-btn.active { background:#111827; color:#fff; border-color:#111827; }
	      .mini-btn.danger { border-color:#fecaca; }
	      .mini-btn.danger:hover { background:#fff1f2; }
	      .tab.tab-hidden { opacity: .55; filter: saturate(.8); }
	      .ico { width: 18px; height: 18px; display:block; stroke: currentColor; fill: none; stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; pointer-events:none; }
